# AICRM System - AIé©±åŠ¨çš„å®¢æˆ·å…³ç³»ç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„AICRMç³»ç»Ÿï¼Œé›†æˆäº†ç½‘ç»œçˆ¬è™«ã€åçˆ¬è™«å¯¹æŠ—ã€éªŒè¯ç è¯†åˆ«ã€AIæ•°æ®åˆ†æç­‰å…ˆè¿›åŠŸèƒ½ã€‚

## ğŸŒŸ æ ¸å¿ƒåŠŸèƒ½

### 1. æ•°æ®çˆ¬å–æ¨¡å—
- **å¤šç§çˆ¬å–ç­–ç•¥**: HTTPè¯·æ±‚ã€Seleniumã€Playwright
- **æ™ºèƒ½ç­–ç•¥é€‰æ‹©**: æ ¹æ®ç›®æ ‡ç½‘ç«™è‡ªåŠ¨é€‰æ‹©æœ€ä½³çˆ¬å–æ–¹å¼
- **å¹¶å‘çˆ¬å–**: æ”¯æŒæ‰¹é‡URLå¹¶å‘çˆ¬å–
- **æ•°æ®æå–**: æ”¯æŒCSSé€‰æ‹©å™¨æå–ç»“æ„åŒ–æ•°æ®
- **åŠ¨æ€å†…å®¹**: æ”¯æŒJavaScriptæ¸²æŸ“é¡µé¢

### 2. åçˆ¬è™«å¯¹ç­–
- **ä»£ç†æ± ç®¡ç†**
  - è‡ªåŠ¨è·å–å’ŒéªŒè¯ä»£ç†
  - ä»£ç†è½®æ¢å’Œå¥åº·æ£€æŸ¥
  - æ”¯æŒHTTP/HTTPS/SOCKS5ä»£ç†
  - ä»£ç†è´¨é‡è¯„åˆ†ç³»ç»Ÿ

- **è¯·æ±‚å¤´ä¼ªè£…**
  - éšæœºUser-Agentç”Ÿæˆ
  - å®Œæ•´çš„æµè§ˆå™¨è¯·æ±‚å¤´æ¨¡æ‹Ÿ
  - Cookieå’ŒSessionç®¡ç†

- **æµè§ˆå™¨æŒ‡çº¹å¯¹æŠ—**
  - CanvasæŒ‡çº¹éšæœºåŒ–
  - WebGLæŒ‡çº¹éšæœºåŒ–
  - æ—¶åŒºå’Œè¯­è¨€éšæœºåŒ–
  - çª—å£å¤§å°éšæœºåŒ–

- **é€Ÿç‡é™åˆ¶**
  - æ™ºèƒ½è¯·æ±‚é€Ÿç‡æ§åˆ¶
  - è‡ªé€‚åº”å»¶è¿Ÿ
  - çªå‘æµé‡å¤„ç†

### 3. éªŒè¯ç è¯†åˆ«
- **æœ¬åœ°OCRè¯†åˆ«**
  - Tesseract OCRå¼•æ“
  - DDDDOCRæ·±åº¦å­¦ä¹ è¯†åˆ«
  - å›¾åƒé¢„å¤„ç†å’Œå¢å¼º

- **ç¬¬ä¸‰æ–¹APIé›†æˆ**
  - 2captcha
  - Anti-Captcha
  - DeathByCaptcha

- **æ”¯æŒçš„éªŒè¯ç ç±»å‹**
  - æ–‡æœ¬å›¾ç‰‡éªŒè¯ç 
  - reCAPTCHA v2/v3
  - hCaptcha
  - æ»‘å—éªŒè¯ç 
  - ç‚¹å‡»éªŒè¯ç 

### 4. AIæ•°æ®åˆ†æ
- **æƒ…æ„Ÿåˆ†æ**: åˆ†æå®¢æˆ·äº¤äº’æƒ…æ„Ÿå€¾å‘
- **å®ä½“è¯†åˆ«**: è‡ªåŠ¨æå–é‚®ç®±ã€ç”µè¯ã€å¾®ä¿¡ç­‰è”ç³»ä¿¡æ¯
- **å®¢æˆ·ç»†åˆ†**: åŸºäºè¡Œä¸ºå’Œç‰¹å¾çš„K-meansèšç±»
- **å…³é”®è¯æå–**: ä»æ–‡æœ¬ä¸­æå–å…³é”®ä¿¡æ¯
- **é¢„æµ‹åˆ†æ**: å®¢æˆ·æµå¤±é¢„æµ‹ã€æˆäº¤æ¦‚ç‡é¢„æµ‹

### 5. CRMæ•°æ®ç®¡ç†
- **å®¢æˆ·ç®¡ç†**: å®Œæ•´çš„å®¢æˆ·ä¿¡æ¯ç®¡ç†
- **äº¤äº’è®°å½•**: è·Ÿè¸ªæ‰€æœ‰å®¢æˆ·äº¤äº’
- **äº¤æ˜“ç®¡ç†**: é”€å”®æœºä¼šå’Œäº¤æ˜“æµç¨‹ç®¡ç†
- **ä»»åŠ¡ç®¡ç†**: ä»»åŠ¡åˆ›å»ºã€åˆ†é…å’Œè·Ÿè¸ª
- **æ•°æ®å¯è§†åŒ–**: ç›´è§‚çš„ä»ªè¡¨æ¿å’Œå›¾è¡¨

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ
```
- FastAPI: é«˜æ€§èƒ½å¼‚æ­¥Webæ¡†æ¶
- SQLAlchemy: ORMå’Œæ•°æ®åº“ç®¡ç†
- PostgreSQL: ä¸»æ•°æ®åº“
- MongoDB: æ–‡æ¡£å­˜å‚¨
- Redis: ç¼“å­˜å’Œæ¶ˆæ¯é˜Ÿåˆ—
- Celery: å¼‚æ­¥ä»»åŠ¡å¤„ç†
```

### çˆ¬è™«æŠ€æœ¯æ ˆ
```
- Scrapy: åˆ†å¸ƒå¼çˆ¬è™«æ¡†æ¶
- Selenium: æµè§ˆå™¨è‡ªåŠ¨åŒ–
- Playwright: ç°ä»£æµè§ˆå™¨è‡ªåŠ¨åŒ–
- BeautifulSoup: HTMLè§£æ
- aiohttp/httpx: å¼‚æ­¥HTTPå®¢æˆ·ç«¯
```

### AI/MLæŠ€æœ¯æ ˆ
```
- OpenAI API: GPT-4æ¨¡å‹
- Anthropic API: Claudeæ¨¡å‹
- scikit-learn: æœºå™¨å­¦ä¹ 
- Pandas: æ•°æ®å¤„ç†
- NumPy: æ•°å€¼è®¡ç®—
```

### å‰ç«¯æŠ€æœ¯æ ˆ
```
- React 18: UIæ¡†æ¶
- TypeScript: ç±»å‹å®‰å…¨
- Ant Design: UIç»„ä»¶åº“
- ECharts: æ•°æ®å¯è§†åŒ–
- React Router: è·¯ç”±ç®¡ç†
- TanStack Query: æ•°æ®è·å–
```

## ğŸ“¦ å®‰è£…éƒ¨ç½²

### 1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd aicrm_system
```

### 2. åç«¯å®‰è£…

#### å®‰è£…Pythonä¾èµ–
```bash
cd backend
pip install -r requirements.txt
```

#### é…ç½®ç¯å¢ƒå˜é‡
åˆ›å»º `.env` æ–‡ä»¶ï¼š
```bash
# æ•°æ®åº“é…ç½®
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=aicrm_db
POSTGRES_USER=aicrm_user
POSTGRES_PASSWORD=your_password

# Redisé…ç½®
REDIS_HOST=localhost
REDIS_PORT=6379

# AIæœåŠ¡é…ç½®
OPENAI_API_KEY=your_openai_api_key
ANTHROPIC_API_KEY=your_anthropic_api_key

# éªŒè¯ç æœåŠ¡é…ç½®ï¼ˆå¯é€‰ï¼‰
2CAPTCHA_API_KEY=your_2captcha_key
```

#### åˆå§‹åŒ–æ•°æ®åº“
```bash
python -c "from app.models.database import DatabaseManager; from app.core.config import settings; db = DatabaseManager(settings.database_url); db.init_db()"
```

#### å¯åŠ¨åç«¯æœåŠ¡
```bash
cd backend/app
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

### 3. å‰ç«¯å®‰è£…

#### å®‰è£…Node.jsä¾èµ–
```bash
cd frontend
npm install
```

#### å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm start
```

å‰ç«¯å°†åœ¨ http://localhost:3000 å¯åŠ¨

### 4. Dockeréƒ¨ç½² (å¯é€‰)

#### ä½¿ç”¨Docker Compose
```bash
docker-compose up -d
```

## ğŸš€ ä½¿ç”¨æŒ‡å—

### 1. æ•°æ®çˆ¬å–

#### å•URLçˆ¬å–
```python
from app.services.scraper import WebScraper, ScrapingStrategy

scraper = await WebScraper.create_scraper(
    strategy="http",
    proxy_list=["http://proxy1:port", "http://proxy2:port"],
    rate_limit=2.0
)

result = await scraper.scrape(
    url="https://example.com",
    wait_for_selector=".content"
)

if result.success:
    print(result.data['html'])
```

#### æ‰¹é‡çˆ¬å–
```python
urls = ["https://example1.com", "https://example2.com", "https://example3.com"]
results = await scraper.scrape_multiple(urls, concurrency=5)
```

### 2. éªŒè¯ç è§£å†³

```python
from app.services.captcha_solver import CaptchaSolver, CaptchaType
from PIL import Image

solver = CaptchaSolver(config={
    "ocr_enabled": True,
    "ddddocr_enabled": True
})

# è§£å†³å›¾ç‰‡éªŒè¯ç 
image = Image.open("captcha.png")
result = await solver.solve(image=image, captcha_type=CaptchaType.TEXT_IMAGE)

if result.success:
    print(f"éªŒè¯ç ç­”æ¡ˆ: {result.answer}")
```

### 3. AIæ•°æ®åˆ†æ

```python
from app.services.analytics import DataAnalyzer, AnalysisType

analyzer = DataAnalyzer(config={
    "openai_api_key": "your_api_key"
})

# æƒ…æ„Ÿåˆ†æ
result = await analyzer.analyze_sentiment("å®¢æˆ·å¯¹äº§å“éå¸¸æ»¡æ„")
print(result.data)  # {"sentiment": "positive", "score": 0.8}

# å®ä½“æå–
result = await analyzer.extract_entities("è¯·è”ç³»å¼ ä¸‰ï¼Œç”µè¯13800138000")
print(result.data)  # {"phones": ["13800138000"], "people": ["å¼ ä¸‰"]}

# å®¢æˆ·ç»†åˆ†
import pandas as pd
df = pd.read_csv("customers.csv")
result = await analyzer.segment_customers(df, n_clusters=5)
print(result.data)
```

### 4. CRMæ“ä½œ

#### åˆ›å»ºå®¢æˆ·
```bash
curl -X POST http://localhost:8000/api/customers \
  -H "Content-Type: application/json" \
  -d '{
    "name": "å¼ ä¸‰",
    "email": "zhangsan@example.com",
    "phone": "13800138000",
    "company": "ABCå…¬å¸",
    "status": "lead"
  }'
```

#### åˆ›å»ºäº¤äº’è®°å½•
```bash
curl -X POST http://localhost:8000/api/interactions \
  -H "Content-Type: application/json" \
  -d '{
    "customer_id": "uuid",
    "interaction_type": "email",
    "subject": "äº§å“ä»‹ç»",
    "content": "æ‚¨å¥½ï¼Œè¿™æ˜¯æˆ‘ä»¬çš„äº§å“ä»‹ç»..."
  }'
```

#### åˆ†æå®¢æˆ·
```bash
curl -X POST http://localhost:8000/api/customers/{customer_id}/analyze
```

## ğŸ“Š APIæ–‡æ¡£

å¯åŠ¨åç«¯åï¼Œè®¿é—®ä»¥ä¸‹åœ°å€æŸ¥çœ‹å®Œæ•´APIæ–‡æ¡£ï¼š

- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

ä¸»è¦APIç«¯ç‚¹ï¼š

```
GET    /api/customers           # è·å–å®¢æˆ·åˆ—è¡¨
POST   /api/customers           # åˆ›å»ºå®¢æˆ·
GET    /api/customers/{id}      # è·å–å®¢æˆ·è¯¦æƒ…
PUT    /api/customers/{id}      # æ›´æ–°å®¢æˆ·
DELETE /api/customers/{id}      # åˆ é™¤å®¢æˆ·

GET    /api/interactions        # è·å–äº¤äº’è®°å½•
POST   /api/interactions        # åˆ›å»ºäº¤äº’è®°å½•

GET    /api/deals               # è·å–äº¤æ˜“åˆ—è¡¨
POST   /api/deals               # åˆ›å»ºäº¤æ˜“

GET    /api/tasks               # è·å–ä»»åŠ¡åˆ—è¡¨
POST   /api/tasks               # åˆ›å»ºä»»åŠ¡

POST   /api/scrape              # çˆ¬å–ç½‘é¡µ
POST   /api/captcha/solve       # è§£å†³éªŒè¯ç 
POST   /api/analyze/sentiment   # æƒ…æ„Ÿåˆ†æ
GET    /api/dashboard/stats     # ä»ªè¡¨æ¿ç»Ÿè®¡
```

## ğŸ”§ é…ç½®è¯´æ˜

ä¸»é…ç½®æ–‡ä»¶ï¼š`config/settings.yaml`

```yaml
scraping:
  timeout: 30
  max_retries: 3
  concurrent_requests: 16
  download_delay: 0.5

  proxy:
    enabled: true
    pool_size: 100
    rotation_interval: 300

  rate_limit:
    enabled: true
    requests_per_second: 2

captcha:
  ocr:
    enabled: true
    engine: "tesseract"

ai_services:
  openai:
    enabled: true
    model: "gpt-4-turbo-preview"

anti_detection:
  headers:
    random: true
  fingerprint:
    random_canvas: true
    random_webgl: true
```

## ğŸ›¡ï¸ å®‰å…¨è¯´æ˜

1. **APIå¯†é’¥ç®¡ç†**: æ°¸è¿œä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç APIå¯†é’¥
2. **ä»£ç†ä½¿ç”¨**: ä½¿ç”¨ä»£ç†æ—¶è¯·ç¡®ä¿éµå®ˆå½“åœ°æ³•å¾‹æ³•è§„
3. **æ•°æ®éšç§**: çˆ¬å–æ•°æ®æ—¶éµå®ˆrobots.txtå’Œéšç§æ”¿ç­–
4. **é€Ÿç‡é™åˆ¶**: è®¾ç½®åˆç†çš„è¯·æ±‚é€Ÿç‡ï¼Œé¿å…å¯¹ç›®æ ‡ç½‘ç«™é€ æˆå‹åŠ›

## ğŸ“ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„çˆ¬è™«ç­–ç•¥
1. ç»§æ‰¿ `WebScraper` ç±»
2. å®ç° `_scrape_xxx` æ–¹æ³•
3. æ·»åŠ åˆ° `ScrapingStrategy` æšä¸¾

### æ·»åŠ æ–°çš„éªŒè¯ç è§£å†³å™¨
1. ç»§æ‰¿ `APICaptchaSolver` æˆ–å®ç°è‡ªå®šä¹‰è§£å†³å™¨
2. åœ¨ `CaptchaSolver` ä¸­æ³¨å†Œ
3. æ·»åŠ ç›¸åº”çš„é…ç½®é€‰é¡¹

### æ·»åŠ æ–°çš„AIåˆ†æåŠŸèƒ½
1. åœ¨ `AnalysisType` ä¸­æ·»åŠ æ–°ç±»å‹
2. åœ¨ `DataAnalyzer` ä¸­å®ç°åˆ†ææ–¹æ³•
3. æ·»åŠ å¯¹åº”çš„APIç«¯ç‚¹

## ğŸ§ª æµ‹è¯•

```bash
# åç«¯æµ‹è¯•
cd backend
pytest tests/

# å‰ç«¯æµ‹è¯•
cd frontend
npm test
```

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## ğŸ“§ è”ç³»æ–¹å¼

- é¡¹ç›®åœ°å€: [GitHub Repository]
- æ–‡æ¡£: [Documentation Site]
- é‚®ç®±: support@aicrm.example.com

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰å¼€æºé¡¹ç›®çš„è´¡çŒ®è€…ï¼
